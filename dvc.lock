schema: '2.0'
stages:
  compute_dataset:
    cmd: python3 code/compute_task_data.py --dataset data/labelstudio-pets-dataset.json
      --output data/computed/pets-dataset/
    deps:
    - path: code/compute_task_data.py
      md5: aab422f14710e9c9cd899f86a3eacc5b
      size: 2220
    - path: data/labelstudio-pets-dataset.json
      md5: 296e963694f5a7cd63b97fccb7ec601b
      size: 89956236
    outs:
    - path: data/computed/pets-dataset/
      md5: 74705f83cc29e888440e4150ecb5249c.dir
      size: 1525937273
      nfiles: 14780
  train:
    cmd: python3 code/train.py --dataset data/computed/pets-dataset/ --config ./control.yaml
    deps:
    - path: ./control.yaml
      md5: 25050a3a6d2d74f98248fbe08ad7f7a3
      size: 650
    - path: code/train.py
      md5: 737a412a47bad4029fdf5b7d1cbd6252
      size: 2380
    - path: data/computed/pets-dataset/
      md5: 74705f83cc29e888440e4150ecb5249c.dir
      size: 1525937273
      nfiles: 14780
    outs:
    - path: models/best_model.pth
      md5: 0e72b0228e512c9ad6be32e6e9539a28
      size: 354509823
    - path: models/latest_model.pth
      md5: 5cbbae028fa2a537f63f0b3d1224ced8
      size: 354512611
  evaluate_model:
    cmd: python3 code/eval.py --dataset data/computed/pets-dataset/ --model models/best_model.pth
      --config ./control.yaml
    deps:
    - path: ./control.yaml
      md5: 25050a3a6d2d74f98248fbe08ad7f7a3
      size: 650
    - path: data/computed/pets-dataset/
      md5: 74705f83cc29e888440e4150ecb5249c.dir
      size: 1525937273
      nfiles: 14780
    - path: models/best_model.pth
      md5: 0e72b0228e512c9ad6be32e6e9539a28
      size: 354509823
    outs:
    - path: metrics/datapoints/pr_curve.json
      md5: a6287f0546b48f0fc0cdcc4a4d1fdc03
      size: 308023
    - path: metrics/datapoints/roc.json
      md5: d76f27953968370046c6ee6ce89dbb90
      size: 289114
    - path: metrics/datapoints/summary.json
      md5: 91d0bb168ac14c956100b7dcc5330d4f
      size: 345
